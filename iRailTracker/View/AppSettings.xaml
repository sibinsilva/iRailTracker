<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="iRailTracker.View.AppSettings"
             xmlns:converters="clr-namespace:iRailTracker.Converters"
             xmlns:vm="clr-namespace:iRailTracker.ViewModel"
             Title="Settings">

    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:InverseBoolConverter x:Key="InverseBoolConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="24">

            <!-- AUTO REFRESH TOGGLE -->
            <Label Text="Auto Refresh"
                   FontAttributes="Bold"
                   FontSize="16" />

            <HorizontalStackLayout Spacing="20">

                <RadioButton Content="On"
             GroupName="AutoRefreshGroup"
             IsChecked="{Binding IsAutoRefreshEnabled}" />

                <RadioButton Content="Off"
             GroupName="AutoRefreshGroup"
             IsChecked="{Binding IsAutoRefreshEnabled, Converter={StaticResource InverseBoolConverter}}" />

            </HorizontalStackLayout>

            <!-- TIMER SECTION -->
            <Label Text="Auto Refresh Interval"
                   FontAttributes="Bold"
                   FontSize="16" />

            <Picker Title="Select interval"
                    ItemsSource="{Binding RefreshIntervals}"
                    ItemDisplayBinding="{Binding Display}"
                    SelectedItem="{Binding SelectedRefreshInterval}" 
                    IsEnabled="{Binding IsAutoRefreshEnabled}"/>

                    <!-- FAVOURITE STATION -->
            <Label Text="Favourite Station"
                   FontAttributes="Bold"
                   FontSize="16" />

            <Label Text="Set a favourite station to auto-load train journeys on startup."
                   FontSize="13"
                   Opacity="0.7" />

            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="12">
                <Picker Title="Select favourite station"
                        ItemsSource="{Binding StationNames}"
                        SelectedIndex="{Binding SelectedFavouriteIndex, Mode=TwoWay}"
                        FontSize="15"
                        Grid.Column="0" />

                <Button Text="Remove"
                        Command="{Binding ClearFavouriteCommand}"
                        IsVisible="{Binding HasFavouriteStation}"
                        FontSize="14"
                        Padding="12,8"
                        Grid.Column="1"
                        VerticalOptions="Center" />
            </Grid>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>